<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://ricostacruz.com/jquery.transit/jquery.transit.min.js"></script>
	<title>七夕主题</title>
	<link rel="stylesheet" type="text/css" href="../css/style.css" />
	<link rel="stylesheet" type="text/css" href="../css/pageA.css" />
	<link rel="stylesheet" type="text/css" href="../css/pageB.css" />
	<link rel="stylesheet" type="text/css" href="../css/pageC.css" />
</head>
<body>
	<div id="content">
		<ul class="content_ul">
			<!--第一幅画面-->
			<li>
				<!--背景-->
				<div class="a_background">
					<div class="a_background_top"></div>
					<div class="a_background_middle"></div>
					<div class="a_background_bottom"></div>
				</div>
				<!--云-->
				<div class="cloudArea">
					<div class="cloud cloud1"></div>
					<div class="cloud cloud2"></div>
				</div>
				<!--太阳-->
				<div id="sun"></div>
			</li>
			<!--第二幅画面-->
			<li>
				<div class="b_background"></div>
				<!--图片预加载节点，不然切换图片会闪屏-->
				<div class="b_background_preload"></div>
				<!--商店-->
				<div class="shop">
					<div class="door">
						<div class="door_left"></div>
						<div class="door_right"></div>
					</div>
					<!--灯-->
					<div class="lamp"></div>
				</div>
				<!--鸟-->
				<div id="bird"></div>
			</li>
			<!--第三幅图-->
			<li>
				<!--背景-->
				<div class="c_background">
					<div class="c_background_top"></div>
					<div class="c_background_middle"></div>
					<div class="c_background_bottom"></div>
				</div>
				<!--小女孩-->
				<div id="girl"></div>
				<!--水波-->
				<div class="bridge_bottom">
					<div class="water">
						<div class="water1"></div>
						<div class="water2"></div>
						<div class="water3"></div>
						<div class="water4"></div>
					</div>
				</div>
				<!--星星-->
				<div class="star">
					<div class="stars1"></div>
					<div class="stars2"></div>
					<div class="stars3"></div>
					<div class="stars4"></div>
					<div class="stars5"></div>
					<div class="stars6"></div>
				</div>
				<!--logo-->
				<div class="logo"></div>
			</li>
		</ul>
		<!--飘花-->
		<div class="snowFlower"></div>
		<!--男孩-->
		<div id="boy" class="slowWalk"></div>
	</div>
	<div id="btn">
		<button>开始</button>
	</div>
	<script type="text/javascript">
		$(function(){
		//////////////////////////////////
		//--------动画处理--------------//
		/////////////////////////////////
		/*$("button").click(function(){
			$("#sun").addClass("sunset");
			$(".cloud1").addClass("smallCloud");
			$(".cloud2").addClass("largeCloud");
			boy.walkTo(5000,0.2)
				.then(function(){
					Scroll(5000,1);
				})
				.then(function(){
					return boy.walkTo(5000,0.5);
				});
			});*/
		//直接定位到第二幅画面
		Scroll(0,2);
		
		/*小女孩位置*/
		girl.girlLocation();

		/*小男孩走路*/
		var boy = boyWalk();
		boy.takeFlower();
		var visualHeight = $("#content").height();
		var visualWidth = $("#content").width();
		var proportionX = girl.girlLeft() - $("#boy").width()+girl.girlWidth()/5;
		$("button").click(function(){
			boy.walkTo(2000,0.15)
				.then(function(){
					return boy.walkTo(1500,0.25,girl.girlTop()/visualHeight);
				})
				.then(function(){
					return boy.walkTo(1500,proportionX/visualWidth);
				})
				.then(function(){
					return boy.resetBoy();
				})
				.then(function(){
					setTimeout(function(){
						girl.rotate();
						boy.rotate();
						logo.run();
					},1000);
				});
		});

		///////////////
		//---飘花----//
		//////////////
		var flowerImage = [
			'http://img.mukewang.com/55adde120001d34e00410041.png',
			'http://img.mukewang.com/55adde2a0001a91d00410041.png',
			'http://img.mukewang.com/55adde5500013b2500400041.png',
			'http://img.mukewang.com/55adde62000161c100410041.png',
			'http://img.mukewang.com/55adde7f0001433000410041.png',
			'http://img.mukewang.com/55addee7000117b500400041.png'
		];
		var snowFlower = function(){
			var $snowFlower = $(".snowFlower");
			var url = function(){
				return flowerImage[Math.floor(Math.random()*6)];
			}
			var createFlower = function(){
				 return $("<div class='roll'></div>").css({
				'width' : 40,
				'height' : 40,
				'top' : 0,
				'z-index' : 100,
				'background-image' : 'url('+url()+')',
				'position' : 'absolute'
				}).addClass("snowRoll");
			}
			setInterval(function(){
				var $flower = createFlower();
				var flowerLeft = Math.random()*visualWidth - 100;
				var flowerTop = Math.random()*visualHeight -100;
				var flowerLastLeft = Math.random()*visualWidth;
				var flowerLastTop = Math.random()*visualHeight;
				var time = Math.random()*5000;
				$flower.css({
					'left' : flowerLeft,
					'top' : flowerTop
				});
				$flower.transition({
					'left' : flowerLastLeft,
					'top' : flowerLastTop
				},time,'ease-out');
				$snowFlower.append($flower);
			},200);
		};
		$("button").click(function(){
			snowFlower();
		});
	});
	</script>
	<script type="text/javascript" src="../js/Swip.js"></script>
	<script type="text/javascript" src="../js/QiXi.js"></script>
</body>
</html>